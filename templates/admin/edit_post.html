{% extends "base.html" %}
{% block title %}{% if post %}Edit Post{% else %}New Post{% endif %} - Admin{% endblock %}

{% block content %}
<div class="admin-panel">
    <div class="admin-header">
        <h2>{% if post %}Edit Post{% else %}New Post{% endif %}</h2>
        <a href="{{ url_for('admin_dashboard') }}" class="toolbar-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
            Back
        </a>
    </div>

    <form method="POST" class="post-form">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <div class="form-group">
            <label for="title">Title</label>
            <input type="text" id="title" name="title" value="{{ post.title if post else '' }}" required>
        </div>

        <div class="form-group">
            <label for="slug">Slug <small>(auto-generated if empty)</small></label>
            <input type="text" id="slug" name="slug" value="{{ post.slug if post else '' }}">
        </div>

        <div class="form-group">
            <label for="tags">Tags <small>(comma separated)</small></label>
            <input type="text" id="tags" name="tags" value="{{ post_tags }}" placeholder="e.g. Security, Python, Tutorial">
        </div>

<div class="form-group">
            <label for="excerpt">Excerpt <small>(auto-generated if empty)</small></label>
            <textarea id="excerpt" name="excerpt" rows="3">{{ post.excerpt if post else '' }}</textarea>
        </div>

        <div class="form-group">
            <label for="content">Content <small>(Markdown)</small></label>
            <textarea id="content" name="content" rows="20" required>{{ post.content if post else '' }}</textarea>
        </div>

        <div class="form-group form-check">
            <label>
                <input type="checkbox" name="published" {% if post and post.published %}checked{% endif %}>
                Published
            </label>
        </div>

        <div class="form-actions">
            <button type="submit" class="toolbar-btn toolbar-btn-primary">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
                Save Post
            </button>
        </div>
    </form>
</div>
{% endblock %}
